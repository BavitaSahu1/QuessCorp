{% extends 'base_admin.html' %}
{% block content %}

<br> 

<form class="form-inline my-2 my-lg-0" method="post">
  {% csrf_token %} 
  <div style="padding: 20px;">
  <input class="form-control mr-sm-2" type="date" placeholder="Search by Date" name="att_date" aria-label="Search">
  <button class="btn btn-outline-success my-2 my-sm-0" type="submit"> <i class="fa fa-search" aria-hidden="true"></i> Search</button>
  </div>
</form> <br> 

<div class="shadow-lg p-3 mb-5 rounded" style="border-radius: 15px; background-color: rgba(255,255,255,0.13); text-align: center;"><h2>Attendance List</h2></div>
<br>
  




<div class="container">
  {% for msg in messages %}
          <div class="alert alert-warning alert-dismissible fade show" role="alert" style="background-color: rgb(187, 240, 187);">
               {{msg}}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>                
  {% endfor %}
</div> 



  <div style="padding: 3px;">
  <div class="table-responsive">
  <table class="table" id="myTable" border="">
    <thead>
      <tr style="background-color: black; color: white;">
        <th scope="col">Employee ID</th>
        <th scope="col">Name</th>
        <th scope="col">Date</th>
        <th scope="col">In Time</th>
        <th scope="col">Out Time</th>
        <th scope="col">Status</th>
        <th scope="col">Update Status</th>
      </tr>
    </thead>
    <tbody>
        {% for i in data %}
      <tr style="background-color: #ededfc;">    
        <td>{{i.emp_id}}</td>   
        <td>{{i.full_name}}</td>
        <td>{{i.attendance_date}}</td>
        <td>{{i.in_time}}</td>
        <td>{{i.out_time}}</td>
        <td>{{i.emp_status}}</td>

        <td>
            <form action="{% url 'EditAttStatus' %}" method="post"> 
            {% csrf_token %}
              <input type="hidden" name="editBtn" value="{{i.emp_id}}">
              <button type="submit" class="btn btn-outline-success"><i class="fas fa-edit"></i> Update Status</button>
            </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
  </div>




  <script>
    document.querySelectorAll('.delete-button').forEach(button => {
      button.addEventListener('click', function (event) {
        event.preventDefault();
        if (confirm('Are you sure you want to delete this record?')) {
          event.target.closest('form').submit();
        }
      });
    });
  </script> 




  <br> <br>

<!-- Start CDN for Pagingnation and static search boxes  -->
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>

<script>
  $(document).ready(function () {
    $('#myTable').DataTable();
  });
</script>
<!-- End CDN for Pagingnation and static search boxes -->
  {% endblock %}


  